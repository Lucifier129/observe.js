;(function($,window,document,undefined){'use strict';var head=document.getElementsByTagName('head')[0],observe,observe_init=(function(){var init;if('create'in Object){observe=addSetter;addEvent=null;init=function(obj){var _obj,_old,key;if(!('__hasSetter'in obj)){_old={};_obj=obj;obj=Object.create(proto);for(key in _obj){_obj.hasOwnProperty(key)&&(obj[key]=_old[key]=_obj[key])}obj._old=_old;obj.__hasSetter={}}return obj}}else if('onpropertychange'in head){observe=addEvent;addSetter=null;var isIE6=navigator.userAgent.indexOf("MSIE 6.0")>0;init=function(obj){var _obj,_old,key;if(!('__hasSetter'in obj)){_old={};_obj=obj;obj=document.createElement('obj');head.appendChild(obj).parentNode.removeChild(obj);isIE6&&head.appendChild(obj);for(key in _obj){if(_obj.hasOwnProperty(key)){obj[key]=_old[key]=_obj[key]}}for(key in proto){if(proto.hasOwnProperty(key)){obj[key]=proto[key]}}obj._old=_old;obj.__hasSetter={}}return obj}}return init})(),proto={add:function(key,value){this[key]=this._old[key]=value||'default value';return this},remove:(function(){return observe===addSetter?function(key){delete this[key];delete this._old[key];delete this.__hasSetter[key];return this}:function(key){this.removeAttribute(key);delete this._old[key];delete this.__hasSetter[key];return this}})(),each:function(callback){for(var key in this._old){callback.call(this[key],key,this[key])}return this},extend:function(src){for(var key in src){this.add(key,src[key])}return this},on:function(){var args=arguments,type=$.type(args[0]),callback,key;if(args.length===1){if(type==='object'){args=args[0];for(key in args){callback=args[key];if(typeof callback==='function'){if(!(key in this)){this.add(key)}observe(this,key,callback)}}}else if(type==='function'){callback=args[0];for(key in this._old){observe(this,key,callback)}}}else if(args.length===2){key=args[0];callback=args[1];if(type==='string'&&typeof callback==='function'){if(!(key in this)){this.add(key)}observe(this,key,callback)}}return this},off:function(){var args=arguments,key,len,i;if(!args.length){this.__hasSetter={}}else{args=Array.prototype.slice.call(args);for(i=0,len=args.length;i<len;i+=1){key=args[i];typeof key==='string'&&key in this.__hasSetter&&delete this.__hasSetter[key]}}return this}};function addSetter(obj,prop,callback){if(prop in obj.__hasSetter){obj.__hasSetter[prop]=callback;return obj}var value=obj[prop];obj.__hasSetter[prop]=callback;return Object.defineProperty(obj,prop,{set:function(v){value=v;prop in obj.__hasSetter&&obj.__hasSetter[prop].call(v,prop,v)},get:function(){return value}})}function addEvent(obj,prop,callback){obj.__hasSetter[prop]=callback;if(!obj.onpropertychange){var e=window.event;obj.onpropertychange=function(){var key=e.propertyName;key in obj.__hasSetter&&obj.__hasSetter[key].call(obj[key],key,obj[key])}}return obj}window.$=(function($){var _$=$;return function(){var args=arguments;return args.length===1&&_$.isPlainObject(args[0])?observe_init.apply(null,args):_$.apply(null,args)}})($)})(jQuery,window,document);
